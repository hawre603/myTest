<!DOCTYPE html>
<head>
<title>New Walk Museum 999</title>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<style>
      html, body{
        height: 100%;
        margin: 0px;
        padding: 0px
      }
	  #map-page { width: 100%; height: 100%; padding: 0; }
	  #map-canvas{ width: 100%; height:80%; padding: 0; }
    </style><link rel='stylesheet' href='http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css' />

<script src='http://code.jquery.com/jquery-1.9.1.min.js'></script>

<script src='http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js'></script>

<script src='https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false'></script>
<script src='http://jquery.bassistance.de/validate/jquery.validate.js'></script>

<script src='http://jquery.bassistance.de/validate/additional-methods.js'></script>

<link rel='stylesheet' href='http://jquery.bassistance.de/validate/demo/site-demos.css'/>
<link rel='stylesheet' type='text/css' href='../appStyling.css'/>
 

<script>
        
        $( document ).on( 'pageinit', '#map-page', function() {
    if ( navigator.geolocation ) {
        function success(pos) { drawMap(new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));
        }
		function fail(error) {
            drawMap(defaultLatLng);  // Failed to find location, show default map
        }
		
		// Find the users current position.  Cache the location for 5 minutes, timeout after 6 seconds
        navigator.geolocation.getCurrentPosition(success, fail, 
		{maximumAge: 500000, enableHighAccuracy:true, timeout: 6000});
    } else {
        drawMap(defaultLatLng);  // No geolocation support, show default map
    }
    function drawMap(latlng) {
        var myOptions = {
            zoom: 13,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'), myOptions);
        // Add an overlay to the map of current lat/lng
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            title: 'Current Location!'
        });

		var myLatLng = new google.maps.LatLng('52.6289384','-1.127775');
		var imgIcon ='../admin/icons/map-marker.png';
		var marker1 = new google.maps.Marker({
            position: myLatLng,
            map: map,
			icon : imgIcon,
            title: 'New Walk Museum, 53 New Walk Leicester, LE1 7EA'
        });
		
		 var contentString1='<div id=content><div id=siteNotice><p>New Walk Museum and Art Gallery</p><p><a href=New_Walk_Museum_999.html#detail-page>Click for more detail</a></p></div></div>';
		var infowindow1 = new google.maps.InfoWindow({
		content: contentString1
		});
		
		var infowindowCurrent = new google.maps.InfoWindow({
		content: 'Current Location!'
		});
		
		google.maps.event.addListener(marker, 'click', function() {
		infowindowCurrent.open(map,marker);});
		
		google.maps.event.addListener(marker1, 'click', function() {
		infowindow1.open(map,marker1);
		
		});
		//<a href="#infopage" rel="external" class="ui-link ui-btn"> Next</a>
		
		var locBound = new google.maps.LatLngBounds();
		locBound.extend(myLatLng);
		locBound.extend(latlng);
		//map.setCenter(locBound.getCenter());
   		map.fitBounds(locBound);
/*		
		$('.ui-link ui-btn').click(function(){
			
			alert('imhere');
			console.log('lalala');
		});
		
		var distance = calculateDistance(52.6289384,-1.127775,52.6289384,-1.127775333);
		alert(distance);
		
Number.prototype.toRad = function() {
   return this * Math.PI / 180;
}

function calculateDistance(lat1, lon1, lat2, lon2)
{
	var lat1=52.6289384;
	var lon1=-1.127775;
	var lat2=52.6289384;
	var lon2=-1.127775333;
	
	var R = 6371; // km 
	//has a problem with the .toRad() method below.
	var x1 = lat2-lat1;
	var dLat = x1.toRad();  
	var x2 = lon2-lon1;
	var dLon = x2.toRad(); 
	var dlon = lon2 - lon1 ;
	var dlat = lat2 - lat1 ;
	a = (sin(dlat/2))^2 + cos(lat1) * cos(lat2) * (sin(dlon/2))^2 
	c = 2 * atan2( sqrt(a), sqrt(1-a) ) ;

	var d = R * c; 
	alert(d);
	return d;
}
*/		
		
    }
});




          
    </script>








</head> 
<body> 
 <form action='scripts/submit.php' id='guide' enctype='multipart/form-data' data-ajax='false' method='POST'>
 <input type='hidden' name='guide' value='New Walk Museum 999'> <input type='hidden' name='filename' value='New_Walk_Museum_999'>
<div data-role='page' id='map-page' data-url='map-page'>
  
    <div data-role='header' data-theme='a'>
    <h1>Location Map Guide</h1>
    </div>
    <div role='main' class='ui-content' id='map-canvas'>
        <!-- map loads here... -->
    </div>
	<div data-role='navbar' style='text-align:center'>
<ul>
<li><a href='index.php'> Back</a></li>



<li id="tt"><a href ='#detail-page' rel='external' id='det'> Next</a> </li>


</ul>
</div>
</div>


<div data-role='page' id='detail-page'>
<div data-role='header' data-position='fixed'> <a href='#map-page' data-icon='home'
data-iconpos='notext' data-rel='back'>Home</a>
<h1>Detail ofNew Walk Museum 999 </h1> </div><!-- /header -->
<div data-role='content' id='contbl'> 

<img src='../admin/uploadedmedia/myw3schoolsimage.jpg' width='100%'>
<hr class='imgBorder'><br><hr>

<label>New Walk Museum, 53 New Walk Leicester, LE1 7EA</label><br><hr>

<label></label>


<input name='latitude' type='hidden' value='52.6289384' />

        </div><!-- page content -->
		<div data-role='navbar' style='text-align:center'>
<ul>
<li><a href='#map-page'> Back</a></li>
<li><a href ='#infopage' rel='external'> Next</a>  </li>
</ul>
</div></div></div><!-- end of detail page --><div data-role='page' id='infopage' >
<div data-role='content'>
<div class='ui-corner-all ui-shadow outerDiv'>
<div  class='ui-corner-all ui-shadow innerDiv'>
How old are you? 
<ul data-role='listview' data-inset='true'>
<li><input type ='number'  name ='AGE' id='AGE'></li>
</ul>
What is your postcode?
 <ul data-role='listview' data-inset='true'> 
<li><input type ='text' maxlength='10' name ='POSTCODE' id='POSTCODE'></li>
</ul>
If you would like us to email you your completed guide, enter your email below.
<ul data-role='listview' data-inset='true'> 
<li><input type ='email' maxlength='30' id='email' name ='EMAIL'></li>
 </ul><input type='checkbox' name='saveEmail'>
<p style='padding-left:40px;'>Tick this box if you would like your email to be saved in order to receive e-mails from NewWalk Museum regarding...</p> 
<div data-role='navbar' style='text-align:center' data-position='fixed'>
 <ul>
 <li>
 <a href='#page0'> Back</a>
 </li> 
<li> <input type='submit' data-corners='false' value ='Finish'>
</li>
</ul>
</div>
</div>
</div></div></div>
</form>
<script>
$( '#guide' ).validate({
  rules: { AGE: { required: true, min: 4, max: 99 },
	POSTCODE: {required:true,minlength:5},
	email: {required: true,email:true}
}  });
</script></body>
</html>>